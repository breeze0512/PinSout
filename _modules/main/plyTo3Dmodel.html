

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>main.plyTo3Dmodel &mdash; PinSout 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> PinSout
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../main.html">main package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PinSout</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>main.plyTo3Dmodel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for main.plyTo3Dmodel</h1><div class="highlight"><pre>
<span></span><span class="c1"># from plyfile import PlyData</span>
<span class="c1"># import os</span>
<span class="c1"># from src.SC_demo.sem_seg import batch_inference</span>
<span class="c1"># from plane_ransac_test import *</span>
<span class="c1"># /usr/local/cuda/lib64:$LD_LIBRARY_PATH</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">plyTo3Dmodel.py</span>
<span class="sd">====================================</span>
<span class="sd">The core module of my example project</span>
<span class="sd">&quot;&quot;&quot;</span>
<div class="viewcode-block" id="ply_to_collada"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.ply_to_collada">[docs]</a><span class="k">def</span> <span class="nf">ply_to_collada</span><span class="p">(</span><span class="n">ply_path</span><span class="o">=</span><span class="s1">&#39;/home/dprt/Desktop/21/Untitled Folder 2/room2.ply&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reading the .ply data and divide space</span>

<span class="sd">    Dividing the entire PointCloud data into a certain size.</span>
<span class="sd">    Find the minimum value of each segmented data and subtract it to move the data to the origin.</span>

<span class="sd">    </span>
<span class="sd">    :param string ply_path: The path where A is located</span>

<span class="sd">    :returns: string model_path: Path with the trained model needed to do Semantic segmentation.</span>
<span class="sd">    :returns: string out_filename: The path where the 3D model will be saved</span>
<span class="sd">    :returns: list npy_list: List of split PointCloud information</span>
<span class="sd">    :returns: list min_list: Minimum value of each PointCloud data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plydata</span> <span class="o">=</span> <span class="n">PlyData</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">ply_path</span><span class="p">)</span>
    <span class="nb">dir</span><span class="p">,</span> <span class="n">ply_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">ply_path</span><span class="p">)</span>

    <span class="n">default_x</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">default_y</span> <span class="o">=</span> <span class="mf">10.0</span>

    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="s1">&#39;npy_data2&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
    <span class="n">has_color</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;red&#39;</span> <span class="ow">or</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;blue&#39;</span> <span class="ow">or</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;green&#39;</span><span class="p">:</span>
            <span class="n">has_color</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">lens</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="n">data_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lens</span><span class="p">):</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="mf">10.0</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">or</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="ow">or</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
                <span class="c1"># print (&quot;there is NaN value!!&quot;)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">has_color</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">plydata</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">g</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># data_list.append([x, y, z, r, g, b])</span>
            <span class="n">index_num</span> <span class="o">=</span> <span class="n">make_area_num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">default_x</span><span class="p">,</span> <span class="n">default_y</span><span class="p">)</span>
            <span class="n">check_area</span> <span class="o">=</span> <span class="n">check_area_exist</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">index_num</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">check_area</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">index_info</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">index_info</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>
                <span class="n">index_info</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">index_num</span><span class="p">)</span>
                <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index_info</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_list</span><span class="p">[</span><span class="n">check_area</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>

    <span class="n">npy_list</span><span class="p">,</span> <span class="n">min_list</span> <span class="o">=</span> <span class="n">make_point_label</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
    <span class="c1"># print npy_list, min_list</span>
    <span class="n">npy_file</span> <span class="o">=</span> <span class="n">ply_file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">out_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">npy_file</span><span class="p">)</span>
    <span class="c1"># print out_filename, min_list</span>
    <span class="c1"># data = np.load(&#39;/root/pointnet/data/Stanford_5cls/Area_6_office_1.npy&#39;)</span>
    <span class="c1"># out_filename = &quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/st/npy_data2/office_1&quot;</span>
    <span class="n">model_path</span> <span class="o">=</span> <span class="s1">&#39;/home/dprt/Downloads/log_6cls_test16/model.ckpt&#39;</span>
    <span class="c1"># model_path = &#39;/root/pointnet/sem_seg/log_5cls_2/model.ckpt&#39;</span>
    <span class="c1"># model_path = &#39;/root/pointnet/sem_seg/log_5cls/model.ckpt&#39;</span>
    <span class="n">batch_inference</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">,</span> <span class="n">npy_list</span><span class="p">,</span> <span class="n">min_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_range"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.get_range">[docs]</a><span class="k">def</span> <span class="nf">get_range</span><span class="p">(</span><span class="n">point_cloud</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Making the bouning box information</span>

<span class="sd">        Finding the Minimum and Maximum points of X, Y and Z.</span>

<span class="sd">      </span>
<span class="sd">    :param pcl.PointCloud point_cloud: PointCloud data</span>
<span class="sd">    :returns: list [point_max2, point_min2]: Minimum and Maximum points of X, Y and Z</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="sd">&#39;&#39;&#39; 0.1 10cm&#39;&#39;&#39;</span>
    <span class="n">point_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">point_cloud</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">point_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">point_cloud</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">point_max</span><span class="p">,</span> <span class="n">point_min</span><span class="p">]</span></div>

<div class="viewcode-block" id="check_in_range"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.check_in_range">[docs]</a><span class="k">def</span> <span class="nf">check_in_range</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check whether the pointer is included in the bounding box</span>

<span class="sd">        Check the pointer&#39;s X and Y values are included in the bounding box</span>

<span class="sd">    </span>
<span class="sd">    :param list bbox: Information for bounding box</span>
<span class="sd">    :param list point: Pointer to check</span>

<span class="sd">    </span>
<span class="sd">    :returns: boolean True: The pointer is included in the bounding box</span>
<span class="sd">    :returns: boolean False: The pointer is not included in the bounding box</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">min_point</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">max_point</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">check_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">min_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">max_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">check_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">check_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">min_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">max_point</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">check_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">check_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">check_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="make_point_label"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.make_point_label">[docs]</a><span class="k">def</span> <span class="nf">make_point_label</span><span class="p">(</span><span class="n">data_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find and subtract the minimum value of the segmented data</span>

<span class="sd">        If the number of points of each data in the list is 500 or more, the minimum value of the data is found and subtracted.</span>

<span class="sd">    </span>
<span class="sd">    :param list data_list: List of split point cloud data</span>

<span class="sd">    :returns: list npy_list: The list after subtracting the minimum value from each PointCloud</span>
<span class="sd">    :returns: list min_list: List of minimum values for each PointCloud</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">npy_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">min_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                <span class="n">min_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
                <span class="c1"># print min_value</span>
                <span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">-=</span> <span class="n">min_value</span>
                <span class="c1"># npy_list.append(np.concatenate(points, 1))</span>
                <span class="c1"># print points.size</span>
                <span class="n">npy_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
                <span class="n">min_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_value</span><span class="p">)</span>
                <span class="c1">#</span>
                <span class="c1"># area_data = np.asarray(data[1:], dtype=np.float32)[:, 0:3]</span>
                <span class="c1"># cloud_data = pcl.PointCloud()</span>
                <span class="c1"># cloud_data.from_array(area_data)</span>
                <span class="c1"># print cloud_data.size</span>
                <span class="c1"># out_filename3 = &quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/room2&quot; + &quot;_&quot; + str(count) + &quot;.pcd&quot;</span>
                <span class="c1"># pcl.save(cloud_data, out_filename3)</span>
                <span class="c1"># out_filename2 = &quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/room2&quot; + &quot;_&quot; + str(count) + &quot;.npy&quot;</span>
                <span class="c1"># np.save(out_filename2, points)</span>

        <span class="k">return</span> <span class="n">npy_list</span><span class="p">,</span> <span class="n">min_list</span></div>

<div class="viewcode-block" id="make_area_num"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.make_area_num">[docs]</a><span class="k">def</span> <span class="nf">make_area_num</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">default_x</span><span class="p">,</span> <span class="n">default_y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check the segmented area containing points</span>

<span class="sd">        Create a grid map using the default area(default_x, default_y).</span>
<span class="sd">        Divide the point value by the default area, and set the area that contains the point.</span>

<span class="sd">    :param float x: The x coordinate of the point.</span>
<span class="sd">    :param float y: The y coordinate of the point.</span>
<span class="sd">    :param float default_x: The length of the area.</span>
<span class="sd">    :param float default_y: The height of the area.</span>

<span class="sd">    :returns: list [index_x, index_y]: Index of the area that contains the point</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">index_x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">//</span> <span class="n">default_x</span>
    <span class="n">index_y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">//</span> <span class="n">default_y</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">index_x</span><span class="p">,</span> <span class="n">index_y</span><span class="p">]</span></div>

<div class="viewcode-block" id="check_area_exist"><a class="viewcode-back" href="../../main.plyTo3Dmodel.html#main.plyTo3Dmodel.check_area_exist">[docs]</a><span class="k">def</span> <span class="nf">check_area_exist</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">index_area</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if a divided area exists</span>

<span class="sd">        The first value of each data in the list has area information that contains the data.</span>
<span class="sd">        If an existing segmented area exists, it returns the index value of the area containing data.</span>

<span class="sd">    </span>
<span class="sd">    :param list data_list: List of split point cloud data</span>
<span class="sd">    :param list index_area: The area that contains points.</span>

<span class="sd">    </span>
<span class="sd">    :returns: int index: The index number of the area containing the data</span>
<span class="sd">    :returns: int -1: When there is no area that contains points</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>

            <span class="n">check_x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">index_area</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">check_y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">index_area</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">check_x</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">check_y</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">data_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<span class="c1"># if __name__ == &#39;__main__&#39;:</span>
<span class="c1">#     #</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/conferenceRoom_1.ply&quot;)</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/auditorium_1.ply&quot;)</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/merge_colorized_subsampled.ply&quot;)</span>
<span class="c1">#     ply_to_collada(&quot;/home/dprt/Desktop/Sigspatial_LBJ/booth1.ply&quot;)</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/room2.ply&quot;)</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/all_booth.ply&quot;)</span>
<span class="c1">#     # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/20191112144908_colorized.ply&quot;)</span>
<span class="c1">#     # # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/test/office_18.ply&quot;)</span>
<span class="c1">#     # # ply_to_collada(&quot;/home/dprt/Desktop/SC_DEMO/New Folder/testply.ply&quot;)</span>
<span class="c1">#     # # print 1//7</span>
<span class="c1">#     # # print 0.7 // 7</span>
<span class="c1">#     # # print -0.7 // 7</span>
<span class="c1">#     # # print -1.7 // 7</span>
<span class="c1">#     # # print -7.1 // 7</span>
<span class="c1">#     # x = np.array([[[1,2,3,4,5,5]]],</span>
<span class="c1">#     #               [[1,2,3,4,5,5]])</span>
<span class="c1">#     # print x.shape</span>

</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Wijae Cho

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>